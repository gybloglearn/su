<md-progress-linear md-mode="indeterminate" ng-show="vm.load"></md-progress-linear>
<md-content layout="row" layout-sm="column" layout-xs="column">
  <div layout-padding flex>
    <h1 class="md-display-2" layout="row">
      <span flex>{{vm.weekstocover[0]}}. hét</span>
      <md-button class="md-fab md-primary md-hue-2">
        <md-icon class="material-icons">dashboard</md-icon>
      </md-button>
    </h1>
    <md-divider></md-divider>
    <md-content>
      <div layout="row" style="border-bottom: 1px solid #ddd">
        <div flex=5>
          <h2 class="md-display-1 text-center">HÉT</h2>
        </div>
        <div class="tableHeader" layout="column" flex="{{$index==0?35:''}}" layout-align="space-around none" layout-padding flex ng-repeat="area in ['Összesen', 'SM', 'POTTING', 'BP'] track by $index">
          <div layout="row" flex>
            <div flex>
              <h2 class="md-display-1 text-center" style="margin:5px;">{{area}}</h2>
            </div>
          </div>
          <div layout="row" flex>
            <div flex layout="row" layout-align="space-around none">
              <div ng-repeat="sh in ['A', 'B', 'C', 'D'] track by $index">
                <h3 class="md-headline" style="margin-top: -10px;">{{sh}}</h3>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div layout="row" ng-repeat="w in vm.weekstocover track by $index">
        <div flex=5 layout="row" layout-align="center center">
          <h3 class="text-center" flex>{{w}}. hét<sup style="display: block; font-size: .6em;">{{ (vm.result | filter: {week: w})[0].monday }}<br>{{ (vm.result | filter: {week: w})[0].sunday}}</sup></h3>
        </div>
        <div class="tableMainColumn" layout="column" flex="{{$index==0?35:''}}" layout-align="space-around none" layout-padding flex ng-repeat="area in ['avg', 'sm', 'potting', 'bp'] track by $index">
          <div layout="row" flex>
            <div flex layout="row" layout-align="space-around none">
              <div ng-repeat="sh in ['A', 'B', 'C', 'D'] track by $index" ng-if="area != 'avg'">
                <h3 class="{{vm.setColor(area, sh, w)}}">{{ vm.result | filter: {szak: sh, week: w} | sumField: ''+area+'actual' | number:1 }}</h3>
                <sup style="font-size: .8em;color: rgb(100,113,166)">{{ vm.result | filter: {szak: sh, week: w} | sumField: ''+area+'target' | number:1 }}</sup>
              </div>
              <div ng-repeat="sh in ['A', 'B', 'C', 'D'] track by $index" ng-if="area == 'avg'">
                <sup style="font-size:.7em;color: #aaa; margin-bottom: -2xp;display:block;">A: {{ (vm.result | filter: {szak: sh, week: w} | sumField: ''+area+'actual') | number:1 }}</sup>
                <sup style="font-size:.6em;color: rgb(100,113,166); display:block;">C: {{ (vm.result | filter: {szak: sh, week: w} | sumField: ''+area+'target') | number:1 }}</sup>
                <h3 class="score {{vm.setColor(area, sh, w)}}">
                  {{ (vm.result | filter: {szak: sh, week: w} | sumField: ''+area+'actual') / (vm.result | filter: {szak: sh, week: w} | sumField:''+area+'target') * 100 | number:2 }}%
                  <sup ng-show="vm.getScore(area,sh,w)==0" class="worst"></sup>
                  <sup ng-show="vm.getScore(area,sh,w)==3" class="best"></sup>
                </h3>
              </div>
            </div>
          </div>
        </div>
      </div>
    </md-content>
  </div>
</md-content>